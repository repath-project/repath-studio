@utility drag {
  -webkit-app-region: drag;
}

@utility no-drag {
  -webkit-app-region: no-drag;
}

@utility outline-inset {
  @apply outline-offset-[-1px];
}

@utility button-size-lg {
  min-width: var(--button-size-lg);
  min-height: var(--button-size-lg);
}

@utility button-size-md {
  min-width: var(--button-size-md);
  min-height: var(--button-size-md);
}

@utility button-size-sm {
  min-width: var(--button-size-sm);
  min-height: var(--button-size-sm);
}

@utility button-size-xs {
  min-width: var(--button-size-xs);
  min-height: var(--button-size-xs);
}

@utility button-size {
  @apply button-size-lg md:button-size-md;
}

@utility button-size-small {
  @apply button-size-sm md:button-size-xs;
}

@utility v-divider {
  @apply m-1 border-l border-border self-stretch;
}

@utility h-divider {
  @apply m-1 border-t border-border self-stretch;
}

@utility shortcut-key {
  @apply p-1 text-2xs bg-overlay rounded-sm font-bold text-foreground-muted
  uppercase;
}

@utility button-link {
  @apply text-foreground-hovered inline-block text-left text-wrap break-all
  hover:cursor-pointer hover:underline outline-default;
}

@utility backdrop {
  @apply fixed inset-0 flex items-center justify-center bg-backdrop
  animate-in fade-in;
}

@utility form-element {
  @apply bg-primary border-0 w-full px-3 py-1 h-[27px]! shadow-none!
  text-foreground! disabled:text-foreground-disabled!
  hover:text-foreground-hovered! focus:text-foreground-hovered! box-border
  placeholder:text-foreground-disabled text-xs!;
}

@utility outline-default {
  @apply outline-foreground outline-offset-1 focus-visible:outline-1;
}

@utility button {
  @apply button-size relative text-center text-nowrap bg-transparent no-drag
  text-foreground outline-default fill-foreground aria-expanded:bg-overlay
  truncate active:bg-overlay;

  &:hover {
    @apply bg-overlay text-foreground-hovered;
  }

  &.accent {
    @apply bg-accent! text-accent-foreground!;

    &:hover {
      @apply bg-accent-light!;
    }
  }

  &:disabled {
    @apply cursor-default pointer-events-none text-foreground-disabled;
  }
}

@utility toolbar {
  @apply flex gap-1 p-1 items-center;
}

@utility button-group {
  @apply flex rounded relative;

  > button,
  > * {
    @apply m-0 rounded-none border-l border-border;

    &:first-child {
      @apply border-l-0 rounded-l;
    }

    &:last-child {
      @apply rounded-r;
    }
  }

  &:before {
    @apply absolute inset-0 rounded border border-border;
    pointer-events: none;
    content: '';
  }
}

@utility icon-button {
  @apply button button-size rounded-sm;

  &.small {
    @apply button-size-small rounded-xs m-0;
  }
}

@utility resize-handle {
  @apply relative;

  &:after {
    content: '';
    display: block;
    z-index: 1;
    position: absolute;
    transition: background-color 0.3s;
  }

  &[data-panel-group-direction='vertical'] {
    @apply h-px;

    &:after {
      @apply w-full h-1;

      top: -50%;
    }
  }

  &[data-panel-group-direction='horizontal'] {
    @apply w-px;

    &:after {
      @apply h-full w-1;

      left: -50%;
    }
  }

  &[data-resize-handle-state='drag'] {
    &:after {
      @apply bg-accent;
    }
  }
}

@utility popover-content {
  @apply bg-primary drop-shadow-lg z-10 rounded-sm break-words border
  border-border animate-in fade-in max-w-xs;
}

@utility tooltip-content {
  @apply bg-primary px-2 py-1 rounded-sm drop-shadow-md border border-border
  animate-in fade-in max-w-3xs;
}

@utility form-control-button {
  @apply button bg-primary text-foreground-muted p-1 outline-inset
  min-h-[27px] min-w-[27px]!;
}

@keyframes rotationBreak {
  0% {
    transform: rotate(0);
  }
  25% {
    transform: rotate(90deg);
  }
  50% {
    transform: rotate(180deg);
  }
  75% {
    transform: rotate(270deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

@utility loader {
  @apply inline-block absolute;
  width: 24px;
  height: 24px;
  top: 50%;
  left: 50%;
  margin: -12px 0 0 -12px;

  &:after,
  &:before {
    @apply absolute top-0 left-0 bg-white;
    content: '';
    width: 24px;
    height: 24px;
    border: 1px solid gray;
    animation: rotationBreak 3s ease-in-out infinite alternate;
  }

  &:after {
    @apply border-accent;
    animation-direction: alternate-reverse;
  }
}
